(this.webpackJsonpgarmin=this.webpackJsonpgarmin||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(28),r=a.n(s),i=(a(35),a(30)),o=(a(36),a(14)),l=a(2),j=a(0);function b(){return Object(j.jsx)("img",{src:"/cart.png",alt:"",style:{width:"50px"}})}function u(){return Object(j.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(j.jsx)("a",{className:"navbar-brand",href:"#",children:Object(j.jsx)("img",{src:"/logo.png",alt:"",style:{width:"250px"}})}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(j.jsxs)("ul",{className:"navbar-nav",children:[Object(j.jsx)("li",{className:"nav-item active",children:Object(j.jsxs)("a",{className:"nav-link",href:"/",children:["Inicio ",Object(j.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)("a",{className:"nav-link",href:"/",children:"Promociones"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)("a",{className:"nav-link",href:"/",children:"Lanzamientos"})})]})}),Object(j.jsx)(b,{})]})}function d(){return Object(j.jsx)(u,{})}var h=a(6),O=a.n(h),p=a(11),m=a(3),x=a(10),f=a.n(x);function g(){var e=Object(c.useState)(!1),t=Object(m.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(""),i=Object(m.a)(r,2),b=i[0],u=i[1],d=Object(c.useState)(""),h=Object(m.a)(d,2),x=h[0],g=h[1],v=Object(c.useState)(""),N=Object(m.a)(v,2),y=N[0],w=N[1],S=Object(c.useState)(""),k=Object(m.a)(S,2),C=k[0],F=k[1],P=Object(c.useState)(!1),U=Object(m.a)(P,2),E=U[0],D=U[1];function I(){return L.apply(this,arguments)}function L(){return(L=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!1),""!==b&&""!==x){e.next=4;break}return D(!0),e.abrupt("return",!1);case 4:return f.a.post("/login/?username=".concat(b,"&password=").concat(x),{withCredentials:!0}).then((function(e){w(e.data),D(!1),u(""),g(""),s(!0)})).catch((function(e){console.log(e),D(!0)})),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.a.get("/status",{withCredentials:!0}).then((function(e){F(e.data.idSession)})).catch((function(e){s(!1)})),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){R.apply(this,arguments)}()}),[]),Object(j.jsxs)(n.a.Fragment,{children:[a?Object(j.jsx)(l.a,{to:{pathname:"/",state:{session:C,name:y}}}):Object(j.jsx)("div",{}),Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsxs)("form",{className:"m-4 p-4 bg-primary",onSubmit:function(){return I()},children:[Object(j.jsx)("div",{className:"mb-4",children:Object(j.jsx)("h1",{children:"Login"})}),Object(j.jsxs)("fieldset",{children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Usuario"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"loginUser","aria-describedby":"emailHelp",placeholder:"ingresa usuario",onChange:function(e){u(e.target.value)}.bind(this)})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"loginPassword",placeholder:"Password",onChange:function(e){g(e.target.value)}.bind(this)})]})]}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),I()},className:"btn btn-secondary",children:"Ingresar"})]}),Object(j.jsxs)("div",{className:"mt-3",children:[Object(j.jsx)("p",{children:"\xbfNo tenes cuenta?"}),Object(j.jsx)(o.b,{to:"/register",children:Object(j.jsx)("button",{className:"btn btn-primary",children:"Registrarse"})})]})]}),Object(j.jsx)(n.a.Fragment,{children:E?Object(j.jsx)("div",{style:{color:"red"},children:"Datos Incorrectos"}):Object(j.jsx)("div",{})})]})}function v(){var e=Object(c.useState)(!1),t=Object(m.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(""),i=Object(m.a)(r,2),o=i[0],b=i[1],u=Object(c.useState)(""),d=Object(m.a)(u,2),h=d[0],x=d[1],g=Object(c.useState)(""),v=Object(m.a)(g,2),N=v[0],y=v[1],w=Object(c.useState)(""),S=Object(m.a)(w,2),k=S[0],C=S[1],F=Object(c.useState)(!1),P=Object(m.a)(F,2),U=P[0],E=P[1],D=Object(c.useState)(""),I=Object(m.a)(D,2),L=(I[0],I[1]);function R(){return(R=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!1),""!==o&&""!==h){e.next=4;break}return E(!0),e.abrupt("return",!1);case 4:return f.a.post("/register/?username=".concat(o,"&password=").concat(h),{withCredentials:!0}).then((function(e){console.log(e),500===e.status?L("El usuario que quiere registrar ya existe"):(y(e.data),C(e.idSession),E(!1),s(!0))})).catch((function(e){E(!0)})),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.a.get("/status",{withCredentials:!0}).then((function(e){s(!0),C(e.data.idSession)})).catch((function(e){s(!1)})),e.abrupt("return",!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){H.apply(this,arguments)}()}),[]),Object(j.jsxs)(n.a.Fragment,{children:[a?Object(j.jsx)(l.a,{to:{pathname:"/",state:{session:k,name:N}}}):Object(j.jsx)("div",{}),Object(j.jsx)(n.a.Fragment,{children:Object(j.jsxs)("form",{className:"m-4 p-4 bg-secondary",children:[Object(j.jsx)("div",{className:"mb-4",children:Object(j.jsx)("h1",{children:"Registracion"})}),Object(j.jsxs)("fieldset",{children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Usuario"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"registerUser","aria-describedby":"emailHelp",placeholder:"ingresa usuario",onChange:function(e){b(e.target.value)}.bind(this)})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"registerPassword",placeholder:"Password",onChange:function(e){x(e.target.value)}.bind(this)})]})]}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),function(){R.apply(this,arguments)}()},className:"btn btn-primary",children:"Crear usuario"})]})}),Object(j.jsx)(n.a.Fragment,{children:U?Object(j.jsx)("div",{style:{color:"red"},children:"Hay algun problema con los datos ingresados "}):Object(j.jsx)("div",{})})]})}function N(e){var t=e.item;return Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsx)("img",{className:"card-img-top",src:t.foto,alt:t.title}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:t.nombre}),Object(j.jsx)("p",{className:"card-text",children:t.descripcion}),Object(j.jsxs)("p",{className:"card-text",children:["Precio: $",t.precio]}),Object(j.jsx)("a",{href:t.url_details,className:"btn btn-primary",children:"Detalles"})]})]})}function y(e){var t=e.productsToShow;return Object(j.jsx)(n.a.Fragment,{children:t.map((function(e){return Object(j.jsxs)("div",{className:"card",style:{width:"15rem",margin:"10px"},children:[" ",Object(j.jsx)(N,{item:e})]},e._id)}))})}function w(){var e=Object(c.useState)([]),t=Object(m.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){fetch("http://localhost:8080/productos/").then((function(e){return e.json()})).then((function(e){s(e)})).catch(console.log)}),[]),Object(j.jsx)(n.a.Fragment,{children:a&&a.length?Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsx)("h1",{children:"Coleccion 2021"}),Object(j.jsx)("div",{className:"row justify-content-center",children:Object(j.jsx)(y,{productsToShow:a})})]}):Object(j.jsx)("div",{children:"Cargando productos"})})}function S(e){var t=Object(c.useState)(!1),a=Object(m.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(""),o=Object(m.a)(i,2),l=o[0],b=o[1];function u(){return(u=Object(p.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.a.get("/logout",{withCredentials:!0}).then((function(t){r(!1),localStorage.clear("token"),e.history.push("/")})).catch(console.log);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){void 0!==e.location.state&&(b(e.location.state.name),r(!0))}),[]),Object(j.jsx)(n.a.Fragment,{children:s?Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsxs)("div",{className:"row",style:{backgroundColor:"#d3d3d3"},children:[Object(j.jsxs)("h1",{className:"m-3",children:["Bienvenido ",l]}),Object(j.jsx)("button",{onClick:function(){return function(){return u.apply(this,arguments)}()},className:"btn btn-warning",children:"Desloguerse"})]}),Object(j.jsx)(w,{})]}):Object(j.jsx)(n.a.Fragment,{children:Object(j.jsxs)("div",{className:"mt-4",children:[Object(j.jsx)("p",{children:"No se encuentra logueado, por favor inicie sesion para ver los productos"}),Object(j.jsx)("a",{href:"/login",children:Object(j.jsx)("button",{className:"btn btn-primary",children:"Iniciar Sesion"})})]})})})}f.a.defaults.baseURL="http://localhost:8080",f.a.defaults.baseURL="http://localhost:8080",f.a.defaults.baseURL="http://localhost:8080";var k=function(){return Object(j.jsxs)("div",{className:"App container",children:[Object(j.jsx)(d,{}),Object(j.jsx)(o.a,{children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{exact:!0,path:"/login",children:Object(j.jsx)(g,{})}),Object(j.jsx)(l.b,{exact:!0,path:"/register",children:Object(j.jsx)(v,{})}),Object(j.jsx)(l.b,{path:"/",render:function(e){return Object(j.jsx)(S,Object(i.a)({},e))}})]})})]})};r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.87100c52.chunk.js.map